//解析规则
function jiexi() {

var res = {};
var d = [];

setItem('Update', '2024.09.13');

try{
    var info = "◆使用说明：\n\n◆助手区：点击图标更新数据（每天会自动获取最新数据，一般无需手动更新），该功能一小时内只生效一次。\n\n◆各种表格：进入后，点击图片可查看大图，可保存。\n\n◆吃个啥：随机选择一种食物，告别选择困难。\n\n◆X5访问：用X5浏览器内核访问网页，如果有网页部分内容不显示则可以尝试，一般没什么用。\n\n◆图片提取：某些网站可能无法正常保存显示的图片，可以复制网址提取图片，网页组件可以显示和操作网页。\n\n◆视频嗅探：可以复制播放视频的网址，嗅探视频，使用海阔播放器播放，操作更便捷，可投屏，下载视频。\n\n◆休闲区：推荐的一些小游戏和视频规则，海阔视界功能强大，学会使用，追剧漫画看直播，全都不在话下，欢迎学习体验。\n\n◆PS：无聊的话，可以看看首页的各种按钮哟～\n";
    var json = JSON.parse(fetchCache("http://excerpt.rubaoo.com/toolman/getMiniNews",1)).data;
    d.push({
        pic_url: json.head_image,
        url: $('hiker://empty#noHistory##noRecordHistory#').rule((info) => {
            let d = [];
            d.push({
                title: info,
                col_type: 'long_text',
                extra: {textSize: 18}
            });
            setResult(d);
        }, info),
        col_type: 'pic_1_full'
    },{
        title: json.weiyu,
        col_type: 'rich_text'
    },{col_type: 'big_blank_block'},{col_type: 'line'});

}catch(e){
    d.push({
        title: "哎呀！你的网络离家出走了(｡•ˇ‸ˇ•｡)",
        pic_url: "hiker://images/home_bg",
        url: "toast://点什么点 (｡•ˇ‸ˇ•｡)",
        col_type: 'pic_1_card'
    });
}

d.push({
    title: "助手区",
    pic_url: "https://pic.imgdb.cn/item/63a165ccb1fccdcd366504b5.png",
    url: $("#noLoading#").lazyRule(() => {
        confirm({
            title: " 确认更新数据？",
            content: "每天会自动更新数据\n\n频繁更新无效\n\n当前版本：" + getItem('Update', ''),
            confirm: `eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));update()`,
            cancel: ''
        });
        return 'hiker://empty'
    }),
        col_type: 'avatar'
},{
    title: "课程表",
    pic_url: "https://pic.imgdb.cn/item/63a165d0b1fccdcd36650978.png",
    url: "https://pic.imgdb.cn/item/66e39668d9c307b7e91aa987.png",
    col_type: 'icon_round_4'
},{
    title: "晚值表",
    pic_url: "https://pic.imgdb.cn/item/63a165d4b1fccdcd36651304.png",
    url: "https://pic.imgdb.cn/item/66dd110ad9c307b7e95506b5.png",
    col_type: 'icon_round_4'
},{
    title: "值日表",
    pic_url: "https://pic.imgdb.cn/item/63a165ddb1fccdcd36651f9a.png",
    url: "https://pic.imgdb.cn/item/66c29b0cd9c307b7e952e223.png",
    col_type: 'icon_round_4'
},{
    title: "早课表",
    pic_url: "https://pic.imgdb.cn/item/63a165dbb1fccdcd36651c6c.png",
    url: "https://pic.imgdb.cn/item/66e39667d9c307b7e91aa91f.png",
    col_type: 'icon_round_4'
},{
    title: "吃个啥",
    pic_url: "https://pic.imgdb.cn/item/63a165ebb1fccdcd36654de5.png",
    url: "hiker://empty#",
    col_type: 'icon_round_4'
},{
    title: "X5访问",
    pic_url: "https://pic.imgdb.cn/item/63a165e6b1fccdcd3665310d.png",
    url: "hiker://empty##",
    col_type: 'icon_round_4'
},{
    title: "图片提取",
    pic_url: "https://pic.imgdb.cn/item/63a165e1b1fccdcd36652693.png",
    url: "hiker://empty###",
    col_type: 'icon_round_4'
},{
    title: "视频嗅探",
    pic_url: "https://pic.imgdb.cn/item/63fedf7cf144a0100773d17e.png",
    url: "hiker://empty####",
    col_type: 'icon_round_4'
},{
    title: "休闲区",
    pic_url: "https://pic.imgdb.cn/item/63a165c8b1fccdcd36650032.png",
    url: "hiker://home@游戏集𝔥",
    col_type: 'avatar'
},{
    title: "POKI游戏",
    pic_url: "https://a.poki.com/icons/fav-512.png",
    url: "https://poki.cn/#gameTheme#",
    col_type: 'icon_round_small_4'
},{
    title: "魔方栈",
    pic_url: "https://pic1.imgdb.cn/item/63438b2b16f2c2beb148f0b2.png",
    url: "https://huazhechen.gitee.io/cuber#gameTheme#",
    col_type: 'icon_round_small_4'
},{
    title: "影视集",
    pic_url: "https://pic1.imgdb.cn/item/636091fa16f2c2beb1bf0033.png",
    url: "hiker://home@影视集",
    col_type: 'icon_round_small_4'
},{
    title: "香情影视",
    pic_url: "https://pic.imgdb.cn/item/648693bf1ddac507cc06411a.jpg",
    url: "hiker://home@香情影视",
    col_type: 'icon_round_small_4'
},{col_type: 'big_blank_block'});

res.data = d;
setHomeResult(res);

}//解析规则


//二级解析
function jiexi2() {

var res = {};
var d = [];

if(MY_URL.includes("#gameTheme#")){
    d.push({
        col_type: 'x5_webview_single',
        url: MY_URL,
        desc: "auto&&float",
        extra: {canBack: true}
    })
}else if(MY_URL=="hiker://empty#"){
    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));cgs();
}else if(MY_URL=="hiker://empty##"){
    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));X5fw();
}else if(MY_URL=="hiker://empty###"){
     eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));tptq();
}else if(MY_URL=="hiker://empty####"){
    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));spxt();
}else{
    d.push({
        pic_url: MY_URL + "@Referer=",
        url: MY_URL + "#originalSize#@Referer=",
        col_type: 'pic_1_full'
    });
}

res.data = d;
setHomeResult(res);

}//二级解析


//更新数据
function update() {

try{
    var cloud = base64Decode(fetchCache("https://ghproxy.cc/https://raw.githubusercontent.com/xixifree/Hiker/cloudjs/gzzs.js",1));
    if(!cloud || !cloud.includes("解析")){
        var cloud = base64Decode(fetchCache("https://mirror.ghproxy.com/https://raw.githubusercontent.com/xixifree/Hiker/cloudjs/gzzs.js",1));
        if(cloud.includes("解析")){
            writeFile("hiker://files/rules/Hood/cloudjs/gzzs.js",cloud);
            writeFile("hiker://files/cache/update/gzzs.txt",new Date()+'');
            refreshPage();
            return 'toast://数据已更新'
        }
    }else{
        writeFile("hiker://files/rules/Hood/cloudjs/gzzs.js",cloud);
        writeFile("hiker://files/cache/update/gzzs.txt",new Date()+'');
        refreshPage();
        return 'toast://数据已更新'
    }
}catch(e){
    return 'toast://更新失败'
}

}//更新数据


//吃个啥
function cgs() {

var 菜单 = "馄饨 拉面 烩面 热干面 刀削面 油泼面 炸酱面 炒面 重庆小面 米线 酸辣粉 土豆粉 螺狮粉 凉皮儿 麻辣烫 肉夹馍 羊肉汤 炒饭 盖浇饭 卤肉饭 烤肉饭 黄焖鸡 驴肉火烧 麻辣香锅 火锅 酸菜鱼 烤串 披萨 烤鸭 汉堡 炸鸡 寿司 蟹黄包 粽子 煎饼果子 生煎 炒年糕 盖浇饭 砂锅 大排档 米线 满汉全席 西餐 麻辣烫 自助餐 炒面 快餐 水果 西北风 馄饨 火锅 烧烤 泡面 速冻水饺 日本料理 涮羊肉 味千拉面 肯德基 面包 扬州炒饭 自助餐 茶餐厅 海底捞 咖啡 比萨 麦当劳 兰州拉面 沙县小吃 烤鱼 海鲜 铁板烧 韩国料理 粥 快餐 东南亚菜 甜点 农家菜 川菜 粤菜 湘菜 本帮菜 竹笋烤肉 泡面 馒头 西红柿炒蛋 包子";

菜单 = 菜单.split(' ')
h = new Date().getHours();
if (h > 8 && h < 14) tips = '中午'
if (h > 13 && h < 21) tips = '晚上'
if (h > 20 || h < 3) tips = '夜宵'
if (h > 2 && h < 9) tips = '早餐'
var d = []
for (let i = 0; i < 200; i++) {
    d.push({
        col_type: 'blank_block'
    })
}

var 开始url = $('#noLoading#').lazyRule(function(菜单, tips) {
    updateItem('开始', {
        title: "““””<big><b><font color=grey>" + tips + '吃' + "</font></b></big>",
    })
    t = new Date().getTime();
    if (getMyVar('开始', '0') == 0) {
        putMyVar('开始', '1')
        updateItem('图片', {
            img: 'https://pic.imgdb.cn/item/66e0f9e6d9c307b7e941b57a.gif'
        })
        for (let i = 0; i < 菜单.length * 250; i++) {
            for (let j in 菜单) {
                if ((new Date().getTime() - t) % 50 == 0) {
                    updateItem('结果', {
                        title: "““””<big><big><b><font color=#ff8000>" + 菜单[Math.floor(Math.random() * 菜单.length)] + "</font></b></big></big>",
                        url: 'toast://还不够你吃吗😏'
                    })
                }
            }
        }
        java.lang.Thread.sleep(100);
        updateItem('图片', {
            img: 'https://pic.imgdb.cn/item/66e0fa67d9c307b7e9438992.gif'
        })
        putMyVar('开始', '0')
    }
    return 'hiker://empty'
}, 菜单, tips)

d.push({
    col_type: 'card_pic_3',
    url: "hiker://empty",
}, {
    col_type: 'card_pic_3',
    url: 开始url,
    extra: {
        id: '图片',
    },
    img: 'https://pic.imgdb.cn/item/66e0f9e9d9c307b7e941c657.gif',
})

d.push({
    title: '点我点我！',
    col_type: 'text_center_1',
    extra: {
        id: '开始',
    },
    url: 开始url,
})
d.push({
    title: "““””<big><b><font color=grey>" + tips + '吃个啥？' + "</font><b></big>",
    col_type: 'text_center_1',
    url: 开始url,
    extra: {
        id: '结果',
        lineVisible: false
    },
})
setResult(d)

}//吃个啥


//视频嗅探
function spxt() {

d.push({
    desc: "0",
    pic_url: "hiker://images/home_bg",
    url: "hiker://images/home_bg",
    col_type: 'card_pic_1'
},{
    title: "嗅探",
    desc: "请输入网页链接",
    url: $.toString(() => {
        let _web = $.toString(() => {
            var urls = _getUrls()
            for(var k in urls) {
                if(urls[k].match(/\.mp4|\.m3u8|\.mp3|\.m4a/)) {
                    fy_bridge_app.log(urls[k])
                    return urls[k].replace(/.*url=/,"")
                }
            }
        });
        return "webRule://" + input + "@" + _web + "#noHistory#"
    }),
    col_type: 'input',
    extra: {blockRules: ['.flv','.avi','.3gp','.mpeg','.wmv','.mov','.rmvb','.gif','.jpeg','.png','.ico','.svg'], jsLoadingInject: true}
},{col_type: 'line'},{
    title: "提取",
    desc: "请输入网页链接",
    url: $.toString(() => {
        return "video://" + input + "#noHistory#";
    }),
    col_type: 'input',
    extra: {blockRules: ['.3gp','.mpeg','.wmv','.mov','.rmvb','.gif','.jpg','.jpeg','.png','.ico','.svg']}
});

}//视频嗅探


//图片提取
function tptq() {

let x = getItem("x", "否");
let desc = x == "是" ? "float&&300" : "float&&1";
d.push({
    col_type: "x5_webview_single",
    title: "",
    desc: desc,
    url: "",
    extra: {
        js: $.toString(() => {
            function getimgs() {
                var videoElements = document.getElementsByTagName("img");
                if (videoElements == null) {
                    return [];
                }
                let urls = [];
                for (let i = 0; i < videoElements.length; i++) {
                    if (videoElements[i].width > 70 && videoElements[i].height > 70) {
                        const src = videoElements[i].src;
                        if (src == null || src.length < 5 || urls.includes(src) || src.indexOf("data:") == 0) {
                            continue;
                        }
                        //log(src);
                        urls.push(new URL(src).toString());
                    }
                }
                return urls;
            }

            function check() {
                try {
                    let urls = getimgs();
                    if (window.checkedUrls == null) {
                        window.checkedUrls = [];
                    }
                    let checkedUrls = window.checkedUrls;
                    urls = urls.filter(it => {
                        return !checkedUrls.includes(it)
                    });

                    if (urls.length > 0) {
                        let pics = urls.filter(it => it != null && it != "")
                            .map(it => {
                                let u = fba.getHeaderUrl(it);
                                let uu = u.split(";");
                                let pic = u;
                                if (uu.length > 1) {
                                    let u1 = uu[0];
                                    let u2 = uu[1].slice(1, -1).split("&&");
                                    let referer = null;
                                    let ua = null;
                                    let cookie0 = null;
                                    for (let ii of u2) {
                                        let it2 = ii.split("@");
                                        if (it2[0] == "Referer") {
                                            referer = it2[1].replace(/；；/g, ";");
                                        }
                                        if (it2[0] == "User-Agent") {
                                            ua = it2[1].replace(/；；/g, ";");
                                        }
                                        if (it2[0] == "Cookie") {
                                            cookie0 = it2[1].replace(/；；/g, ";");
                                        }
                                    }
                                    pic = u1;
                                    if (referer) {
                                        pic = pic + "@Referer=" + referer;
                                    }
                                    if (ua) {
                                        pic = pic + "@User-Agent=" + ua;
                                    }
                                    if (cookie0) {
                                        pic = pic + "@Cookie=" + cookie0
                                    }

                                } else {
                                    pic = it;
                                }
                                return {
                                    pic: pic,
                                    url: u
                                }
                            });
                        fba.log(pics.length + "");
                        fba.parseLazyRuleAsync($$$().lazyRule((urls) => {

                            let arr = urls.map(it => {
                                return {
                                    title: "",
                                    url: it.pic,
                                    pic_url: it.pic,
                                    col_type: "card_pic_3",
                                    extra: {cls: "pics"}
                                }
                            });
                            addItemBefore("pic_line", arr);
                        }, pics), function() {

                        });
                        for (let it of urls) {
                            window.checkedUrls.push(it);
                        }
                    }
                }catch(e){
                    fba.log(e.toString());
                }
                setTimeout(check, 300);
            }
            check();
        })
    }
},{
    title: "提取",
    url: $.toString(() => {
        putMyVar("i", input);
        deleteItemByCls("pics");
        refreshX5WebView(input);
    }),
    col_type: "input",
    desc: "请输入网页链接",
    pic_url: "",
    extra: {defaultValue: getMyVar("i", "")}
},{
    title: "显示网页组件：" + x,
    url: $("#noLoading#").lazyRule(() => {
        let x = getItem("x", "否");
        let next = x == "否" ? "是" : "否";
        setItem("x", next);
        let desc = x == "否" ? "float&&300" : "float&&1";
        updateItem("pic_tip", {
            title: "显示网页组件：" + next
        });
        refreshX5Desc(desc);
        return "hiker://empty"
    }),
    col_type: "text_center_1",
    desc: "",
    pic_url: "",
    extra: {id: "pic_tip"}
},{
    col_type: "line",
    extra: {id: "pic_line"}
});

}//图片提取


//X5访问
function X5fw() {

d.push({
    desc: "0",
    pic_url: "hiker://images/home_bg",
    url: "hiker://images/home_bg",
    col_type: 'card_pic_1'
},{
    title: "访问",
    desc: "请输入网页链接",
    url: $.toString(() => {
        return "x5://" + input + "#noHistory#";
    }),
    col_type: 'input'
});

}//X5访问