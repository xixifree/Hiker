//解析规则
function jiexi() {

var res = {};
var d = [];

setItem('Update', '2024.09.08');

try{
    var info = "◆使用说明：\n\n◆助手区：点击图标更新数据（每天会自动获取最新数据，一般无需手动更新），该功能一小时内只生效一次。\n\n◆各种表格：进入后，点击图片可查看大图，可保存。\n\n◆晚值调换：按照对话框提示使用即可，如有数据错误可以和作者反馈（虽然不一定修）。\n\n◆X5访问：用X5浏览器内核访问网页，如果有网页部分内容不显示则可以尝试，一般没什么用。\n\n◆图片提取：某些网站可能无法正常保存显示的图片，可以复制网址提取图片，网页组件可以显示和操作网页。\n\n◆视频嗅探：可以复制播放视频的网址，嗅探视频，使用海阔播放器播放，操作更便捷，可投屏，下载视频。\n\n◆休闲区：推荐的一些小游戏和视频规则，海阔视界功能强大，学会使用，追剧漫画看直播，全都不在话下，欢迎学习体验。\n\n◆PS：无聊的话，可以看看首页的各种按钮哟～\n";
    var json = JSON.parse(fetchCache("http://excerpt.rubaoo.com/toolman/getMiniNews",1)).data;
    d.push({
        pic_url: json.head_image,
        url: $('hiker://empty#noHistory##noRecordHistory#').rule((info) => {
            let d = [];
            d.push({
                title: info,
                col_type: 'long_text',
                extra: {textSize: 18}
            });
            setResult(d);
        }, info),
        col_type: 'pic_1_full'
    },{
        title: json.weiyu,
        col_type: 'rich_text'
    },{col_type: 'big_blank_block'},{col_type: 'line'});

}catch(e){
    d.push({
        title: "哎呀！你的网络离家出走了(｡•ˇ‸ˇ•｡)",
        pic_url: "hiker://images/home_bg",
        url: "toast://点什么点 (｡•ˇ‸ˇ•｡)",
        col_type: 'pic_1_card'
    });
}

d.push({
    title: "助手区",
    pic_url: "https://pic.imgdb.cn/item/63a165ccb1fccdcd366504b5.png",
    url: $("#noLoading#").lazyRule(() => {
        confirm({
            title: " 确认更新数据？",
            content: "每天会自动更新数据\n\n频繁更新无效\n\n当前版本：" + getItem('Update', ''),
            confirm: `eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));update()`,
            cancel: ''
        });
        return 'hiker://empty'
    }),
    col_type: 'avatar'
},{
    title: "课程表",
    pic_url: "https://pic.imgdb.cn/item/63a165d0b1fccdcd36650978.png",
    url: "https://pic.imgdb.cn/item/66dd110ad9c307b7e9550719.png",
    col_type: 'icon_round_4'
},{
    title: "晚值表",
    pic_url: "https://pic.imgdb.cn/item/63a165d4b1fccdcd36651304.png",
    url: "https://pic.imgdb.cn/item/66dd110ad9c307b7e95506b5.png",
    col_type: 'icon_round_4'
},{
    title: "值日表",
    pic_url: "https://pic.imgdb.cn/item/63a165ddb1fccdcd36651f9a.png",
    url: "https://pic.imgdb.cn/item/66c29b0cd9c307b7e952e223.png",
    col_type: 'icon_round_4'
},{
    title: "早课表",
    pic_url: "https://pic.imgdb.cn/item/63a165dbb1fccdcd36651c6c.png",
    url: "https://pic.imgdb.cn/item/66c29ac2d9c307b7e95218af.png",
    col_type: 'icon_round_4'
},{
    title: "晚值调换",
    pic_url: "https://pic.imgdb.cn/item/63fedf7cf144a0100773d17e.png",
    url: "hiker://empty###",
    col_type: 'icon_round_4'
},{
    title: "X5访问",
    pic_url: "https://pic.imgdb.cn/item/63a165e6b1fccdcd3665310d.png",
    url: "hiker://empty####",
    col_type: 'icon_round_4'
},{
    title: "图片提取",
    pic_url: "https://pic.imgdb.cn/item/63a165e1b1fccdcd36652693.png",
    url: "hiker://empty##",
    col_type: 'icon_round_4'
},{
    title: "视频嗅探",
    pic_url: "https://pic.imgdb.cn/item/63a165ebb1fccdcd36654de5.png",
    url: "hiker://empty#",
    col_type: 'icon_round_4'
},{
    title: "休闲区",
    pic_url: "https://pic.imgdb.cn/item/63a165c8b1fccdcd36650032.png",
    url: "hiker://home@游戏集𝔥",
    col_type: 'avatar'
},{
    title: "POKI游戏",
    pic_url: "https://a.poki.com/icons/fav-512.png",
    url: "https://poki.cn/#gameTheme#",
    col_type: 'icon_round_small_4'
},{
    title: "魔方栈",
    pic_url: "https://pic1.imgdb.cn/item/63438b2b16f2c2beb148f0b2.png",
    url: "https://huazhechen.gitee.io/cuber#gameTheme#",
    col_type: 'icon_round_small_4'
},{
    title: "影视集",
    pic_url: "https://pic1.imgdb.cn/item/636091fa16f2c2beb1bf0033.png",
    url: "hiker://home@影视集",
    col_type: 'icon_round_small_4'
},{
    title: "香情影视",
    pic_url: "https://pic.imgdb.cn/item/648693bf1ddac507cc06411a.jpg",
    url: "hiker://home@香情影视",
    col_type: 'icon_round_small_4'
},{col_type: 'big_blank_block'});

res.data = d;
setHomeResult(res);

}//解析规则


//二级解析
function jiexi2() {

var res = {};
var d = [];

if(MY_URL.includes("#gameTheme#")){
    d.push({
        col_type: 'x5_webview_single',
        url: MY_URL,
        desc: "auto&&float",
        extra: {canBack: true}
    })
}else if(MY_URL=="hiker://empty#"){
    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));spxt();
}else if(MY_URL=="hiker://empty##"){
    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));tptq();
}else if(MY_URL=="hiker://empty###"){
    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));drwz();
}else if(MY_URL=="hiker://empty####"){
    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));X5fw();
}else{
    d.push({
        pic_url: MY_URL + "@Referer=",
        url: MY_URL + "#originalSize#@Referer=",
        col_type: 'pic_1_full'
    });
}

res.data = d;
setHomeResult(res);

}//二级解析


//晚课晚值
function wksj() {

//大周晚课
list["11"] = ["陈潇晗","徐爽","方媛媛","王艳波","高妍","雷宇","王炳燃","战淑杰","庄新","詹金星","刘昊琳","李杏杏"];
list["12"] = ["张玉莹","崔莹","魏彤芳","王炳燃","王旭","李杏杏","蔡玉姝","吕欣原","魏娜","宫美淇","刘乃芳","唐纯柏"];
list["13"] = ["崔莹","孙国奇","谭乐","王艳波","姜辉","高妍","王炳燃","谭飞燕","唐纯柏","詹金星","李杏杏"];
list["14"] = ["陈潇晗","徐爽","方媛媛","魏彤芳","王旭","雷宇","战淑杰","吕欣原","庄新","邢月玲","刘昊琳"];
list["15"] = ["崔莹","刘乃芳","谭乐","徐爽","王旭","姜辉","谭飞燕","吕欣原","詹金星","宫美淇"];
list["16"] = ["张玉莹","孙国奇","魏彤芳","谭乐","高妍","姜辉","蔡玉姝","庄新","魏娜","邢月玲","雷宇"];
list["17"] = ["崔莹","刘乃芳","王艳波","王炳燃","王旭","李杏杏","蔡玉姝","谭飞燕","詹金星","宫美淇","刘昊琳","唐纯柏"];
//小周晚课
list["18"] = ["陈潇晗","孙国奇","方媛媛","王艳波","雷宇","李杏杏","战淑杰","谭飞燕","庄新","邢月玲","王炳燃","唐纯柏"];
list["19"] = ["张玉莹","崔莹","魏彤芳","谭乐","姜辉","高妍","王炳燃","吕欣原","宫美淇","詹金星","李杏杏"];
list["20"] = ["刘乃芳","孙国奇","王艳波","徐爽","王旭","姜辉","蔡玉姝","谭飞燕","唐纯柏","魏娜"];
list["21"] = ["刘乃芳","张玉莹","方媛媛","徐爽","雷宇","高妍","王炳燃","战淑杰","魏娜","邢月玲","庄新"];

//晚值
list["1"] = ["刘昊琳","徐爽","战淑杰","高妍","孙国奇","唐纯柏"];
list["2"] = ["崔莹","刘乃芳","王旭","吕欣原","宫美淇","代福"];
list["3"] = ["张玉莹","魏娜","魏彤芳","姜辉","刘凯","庄新"];
list["4"] = ["方媛媛","王炳燃","邢月玲","谭飞燕","陈潇晗"];
list["5"] = ["蔡玉姝","王艳波","谭乐","雷宇","詹金星"];

}//晚课晚值


//星期代码
function xqdm() {

var Days = ["周一","周二","周三","周四","周五","周六","周日","小周一","小周二","小周三","小周四"];
var Nums = ["11","12","13","14","15","16","17","18","19","20","21"];

for(var i in Days){
    if(Days[i]==Day){
        Day=Nums[i];
    }else if(Nums[i]==Day){
        Day=Days[i];
    }
}

}//星期代码


//关联数据
function link() {

var Day = getMyVar('Day', '');
var Group = getMyVar('Group', '');

if(Day=="" || Group==""){
    confirm({
        title: "换个人试试吧",
        content: "没有数据(｡•ˇ‸ˇ•｡)"
    });
}else if(Day.includes("未知")){
    confirm({
        title: "问：第"+Day.replace("未知","")+"组是周几？",
        content: "请稍后输入答案\n\n（周一 ~ 小周四）"
    });
}else if(Group.includes("未知")){
    var Day = Group.replace("未知","");
    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));xqdm();
    confirm({
        title: "问："+Day+"是第几组？",
        content: "请稍后输入答案\n\n（1 ~ 5）"
    });
}

}//关联数据


//晚值查询
function wzcx() {

try{
    var list = Array();
    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));wksj();

    //处理输入数据
    if(input.includes(",") || input.includes("，")){
        var input1 = input.replace(/[\,|，].*/,"");
        var input2 = input.replace(/.*[\,|，]/,"");
        if(input1!="" && input2!=""){
            var Day = input1;
            var Group = input2;
        }
    }else{
        var Day = getMyVar('Day', '');
        var Group = getMyVar('Group', '');
    }

    if(Day.includes("周")){
        eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));xqdm();
    }else if(Day<11 || Day>21 || Group<1 || Group>5){
        Day = "";
        Group = "";
    }
    var Name = "";
    for(var i in list[Day]){
        for(var j in list[Group]){
            if(list[Day][i]==list[Group][j]){
                Name = Name==""?Name+list[Day][i]:Name+"，"+list[Day][i];
            }
        }
    }
    if(list[Day].includes("数据错误") || list[Group].includes("刘凯")){
        Name = Name==""?"刘凯":Name+"，刘凯";
    }
    if(Name==""){
        Name = "没有数据(｡•ˇ‸ˇ•｡)";
    }
    var partname = getMyVar('Partner', "0");
    if(partname!=0){
        var tips = "你与【"+partname+"】可以和ta换晚值";
    }else{
        var tips = "查询结果";
    }
    confirm({
        title: tips,
        content: Name
    });
    clearMyVar('Partner');
    clearMyVar('Day');
    clearMyVar('Group');
}catch(e){
    confirm({
        title: "数据错误",
        content: "请重新输入数据",
        confirm: `refreshPage()`,
        cancel: ''
    });
}

}//晚值查询


//更新数据
function update() {

try{
    var cloud = base64Decode(fetchCache("https://agit.ai/vkeithv/Hiker/raw/branch/master/gzzs.js",1));
    if(cloud.includes("解析")){
        writeFile("hiker://files/rules/Hood/cloudjs/gzzs.js",cloud);
        writeFile("hiker://files/cache/update/gzzs.txt",new Date()+'');
        refreshPage();
        return 'toast://数据已更新'
    }else{
        return 'toast://更新失败'
    }

}catch(e){
    return 'toast://更新失败'
}

}//更新数据


//视频嗅探
function spxt() {

d.push({
    desc: "0",
    pic_url: "hiker://images/home_bg",
    url: "hiker://images/home_bg",
    col_type: 'card_pic_1'
},{
    title: "嗅探",
    desc: "请输入网页链接",
    url: $.toString(() => {
        let _web = $.toString(() => {
            var urls = _getUrls()
            for(var k in urls) {
                if(urls[k].match(/\.mp4|\.m3u8|\.mp3|\.m4a/)) {
                    fy_bridge_app.log(urls[k])
                    return urls[k].replace(/.*url=/,"")
                }
            }
        });
        return "webRule://" + input + "@" + _web + "#noHistory#"
    }),
    col_type: 'input',
    extra: {blockRules: ['.flv','.avi','.3gp','.mpeg','.wmv','.mov','.rmvb','.gif','.jpeg','.png','.ico','.svg'], jsLoadingInject: true}
},{col_type: 'line'},{
    title: "提取",
    desc: "请输入网页链接",
    url: $.toString(() => {
        return "video://" + input + "#noHistory#";
    }),
    col_type: 'input',
    extra: {blockRules: ['.3gp','.mpeg','.wmv','.mov','.rmvb','.gif','.jpg','.jpeg','.png','.ico','.svg']}
});

}//视频嗅探


//图片提取
function tptq() {

let x = getItem("x", "否");
let desc = x == "是" ? "float&&300" : "float&&1";
d.push({
    col_type: "x5_webview_single",
    title: "",
    desc: desc,
    url: "",
    extra: {
        js: $.toString(() => {
            function getimgs() {
                var videoElements = document.getElementsByTagName("img");
                if (videoElements == null) {
                    return [];
                }
                let urls = [];
                for (let i = 0; i < videoElements.length; i++) {
                    if (videoElements[i].width > 70 && videoElements[i].height > 70) {
                        const src = videoElements[i].src;
                        if (src == null || src.length < 5 || urls.includes(src) || src.indexOf("data:") == 0) {
                            continue;
                        }
                        //log(src);
                        urls.push(new URL(src).toString());
                    }
                }
                return urls;
            }

            function check() {
                try {
                    let urls = getimgs();
                    if (window.checkedUrls == null) {
                        window.checkedUrls = [];
                    }
                    let checkedUrls = window.checkedUrls;
                    urls = urls.filter(it => {
                        return !checkedUrls.includes(it)
                    });

                    if (urls.length > 0) {
                        let pics = urls.filter(it => it != null && it != "")
                            .map(it => {
                                let u = fba.getHeaderUrl(it);
                                let uu = u.split(";");
                                let pic = u;
                                if (uu.length > 1) {
                                    let u1 = uu[0];
                                    let u2 = uu[1].slice(1, -1).split("&&");
                                    let referer = null;
                                    let ua = null;
                                    let cookie0 = null;
                                    for (let ii of u2) {
                                        let it2 = ii.split("@");
                                        if (it2[0] == "Referer") {
                                            referer = it2[1].replace(/；；/g, ";");
                                        }
                                        if (it2[0] == "User-Agent") {
                                            ua = it2[1].replace(/；；/g, ";");
                                        }
                                        if (it2[0] == "Cookie") {
                                            cookie0 = it2[1].replace(/；；/g, ";");
                                        }
                                    }
                                    pic = u1;
                                    if (referer) {
                                        pic = pic + "@Referer=" + referer;
                                    }
                                    if (ua) {
                                        pic = pic + "@User-Agent=" + ua;
                                    }
                                    if (cookie0) {
                                        pic = pic + "@Cookie=" + cookie0
                                    }

                                } else {
                                    pic = it;
                                }
                                return {
                                    pic: pic,
                                    url: u
                                }
                            });
                        fba.log(pics.length + "");
                        fba.parseLazyRuleAsync($$$().lazyRule((urls) => {

                            let arr = urls.map(it => {
                                return {
                                    title: "",
                                    url: it.pic,
                                    pic_url: it.pic,
                                    col_type: "card_pic_3",
                                    extra: {cls: "pics"}
                                }
                            });
                            addItemBefore("pic_line", arr);
                        }, pics), function() {

                        });
                        for (let it of urls) {
                            window.checkedUrls.push(it);
                        }
                    }
                }catch(e){
                    fba.log(e.toString());
                }
                setTimeout(check, 300);
            }
            check();
        })
    }
},{
    title: "提取",
    url: $.toString(() => {
        putMyVar("i", input);
        deleteItemByCls("pics");
        refreshX5WebView(input);
    }),
    col_type: "input",
    desc: "请输入网页链接",
    pic_url: "",
    extra: {defaultValue: getMyVar("i", "")}
},{
    title: "显示网页组件：" + x,
    url: $("#noLoading#").lazyRule(() => {
        let x = getItem("x", "否");
        let next = x == "否" ? "是" : "否";
        setItem("x", next);
        let desc = x == "否" ? "float&&300" : "float&&1";
        updateItem("pic_tip", {
            title: "显示网页组件：" + next
        });
        refreshX5Desc(desc);
        return "hiker://empty"
    }),
    col_type: "text_center_1",
    desc: "",
    pic_url: "",
    extra: {id: "pic_tip"}
},{
    col_type: "line",
    extra: {id: "pic_line"}
});

}//图片提取


//多人晚值
function drwz() {


try{
    var json = JSON.parse(fetchCache("http://excerpt.rubaoo.com/toolman/getMiniNews",6)).data;
    d.push({
        pic_url: json.head_image,
        url: json.head_image,
        col_type: 'pic_1_full'
    },{
        title: "\t多人说明：输入数据→ 选择队友→ 输入答案",
        col_type: 'rich_text'
    },{col_type: 'big_blank_block'},{col_type: 'line'});

}catch(e){
    d.push({
        title: "哎呀！你的网络离家出走了(｡•ˇ‸ˇ•｡)",
        pic_url: "hiker://images/home_bg",
        url: "toast://点什么点 (｡•ˇ‸ˇ•｡)",
        col_type: 'pic_1_card'
    });
}

var txt = getMyVar('txt', '');

if(txt==""){
    d.push({col_type: 'big_blank_block'},{
        title: "双人换晚值",
        pic_url: "https://pic2.imgdb.cn/item/644d01ce0d2dde5777ace8ac.png",
        url: `input://{"js": "eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));wzcx()", "hint": "\n你是周几晚值，想和第几组交换？\n\n例如：小周二，3\n周三，4"}`,
        col_type: 'icon_2_round'
    },{
        title: "多人换晚值",
        pic_url: "https://pic2.imgdb.cn/item/644d27260d2dde5777d927bc.png",
        url: `input://{"js": "putMyVar('txt', input);refreshPage();", "hint": "\n你是周几晚值，想和第几组交换？\n\n例如：小周二，3\n周三，4"}`,
        col_type: 'icon_2_round'
    });
}else{
    try{
        d.push({col_type: 'line_blank'},{
            title: "点击输入答案",
            url: `input://{"js": "var Day=getMyVar('Day','');var Group=getMyVar('Group','');if(Day.includes('未知')){putMyVar('Day',input)}else{putMyVar('Group',input)};eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));wzcx()", "hint": "请输入刚才的问题答案"}`,
            col_type: 'text_center_1'
        },{col_type: 'big_blank_block'});

        var list = Array();
        eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));wksj();

        if(txt.includes(",") || txt.includes("，")){
            var input1 = txt.replace(/[\,|，].*[\s\S]/,"");
            var input2 = txt.replace(/.*[\,|，]/,"");
            if(input1!="" && input2!=""){
                var Day = input1;
                var Group_1 = input2;
                eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));xqdm();
                var Day_1 = Day;
            }
        }
        //错误弹窗
        if(list[Day_1].includes("数据错误") || list[Group_1].includes("数据错误")){}
        var Name = "";
        //查询晚课名单
        for(var i in list[Day_1]){
            //查询直接换晚值
            for(var j in list[Group_1]){
                if(list[Day_1][i]==list[Group_1][j]){
                    Name = Name==""?Name+list[Day_1][i]:Name+"，"+list[Day_1][i];
                }
            }
            d.push({
                title: list[Day_1][i],
                url: $("hiker://empty##noLoading#"+Day_1+"/"+Group_1+"/"+list[Day_1][i]).lazyRule(() => {
                    var txt_1 = input.replace(/.*#/,"");
                    var Day_1 = txt_1.split("/")[0];
                    var Group_1 = txt_1.split("/")[1];
                    var Name_1 = txt_1.split("/")[2];
                    var list = Array();
                    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));wksj();
                    clearMyVar('Day');clearMyVar('Group');
                    //查询人员组别x
                    for(var x=1; x<=5; x++){
                        if(list[x].includes(Name_1)){
                            putMyVar('Day', '未知'+x);
                        }
                    }
                    putMyVar('Partner', Name_1);
                    putMyVar('Group', Group_1);
                    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));link();
                    return 'hiker://empty'
                }),
                col_type: 'text_4'
            });
        }
        //查询组别名单
        for(var i in list[Group_1]){
            d.push({
                title: list[Group_1][i],
                url: $("hiker://empty##noLoading#"+Day_1+"/"+Group_1+"/"+list[Group_1][i]).lazyRule(() => {
                    var txt_2 = input.replace(/.*#/,"");
                    var Day_1 = txt_2.split("/")[0];
                    var Group_1 = txt_2.split("/")[1];
                    var Name_2 = txt_2.split("/")[2];
                    var list = Array();
                    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));wksj();
                    clearMyVar('Day');clearMyVar('Group');
                    //查询人员晚课x
                    for(var x=11; x<=21; x++){
                        if(list[x].includes(Name_2)){
                            putMyVar('Group', '未知'+x);
                        }
                    }
                    putMyVar('Partner', Name_2);
                    putMyVar('Day', Day_1);
                    eval(fetch('hiker://files/rules/Hood/cloudjs/gzzs.js'));link();
                    return 'hiker://empty'
                }),
                col_type: 'text_4'
            });
        }
        if(list[Group_1].includes("刘凯")){
            Name = Name==""?"刘凯":Name+"，刘凯";
        }
        if(Name!=""){
            confirm({
                title: "你可以和ta双人换晚值",
                content: Name
            });
        }
    }catch(e){
        confirm({
            title: "数据错误",
            content: "请重新输入再试",
            confirm: `refreshPage()`,
            cancel: ''
        });
    }
    clearMyVar('txt');
}

}//多人晚值


//X5访问
function X5fw() {

d.push({
    desc: "0",
    pic_url: "hiker://images/home_bg",
    url: "hiker://images/home_bg",
    col_type: 'card_pic_1'
},{
    title: "访问",
    desc: "请输入网页链接",
    url: $.toString(() => {
        return "x5://" + input + "#noHistory#";
    }),
    col_type: 'input'
});

}//X5访问